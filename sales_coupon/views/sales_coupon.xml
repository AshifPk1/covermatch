<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="sale_coupon.sale_coupon_view_form" model="ir.ui.view">
            <field name="name">sale.coupon.form</field>
            <field name="model">sale.coupon</field>
            <field name="arch" type="xml">
                <form string="Coupons" create="false" delete="false">
                    <header>
                         <button name="action_coupon_sent" type="object" string="Send by Email" class="oe_highlight"/>
                        <field name="state" widget="statusbar" statusbar_visible="new,used,expired" context="{'state': state}"/>
                    </header>
                    <sheet>
                        <group>
                            <field name="code"/>
                            <field name="expiration_date"/>
                            <field name="partner_id"/>
                            <field name="order_id"/>
                            <field name="sales_order_id"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Inherit Form View to Modify it -->
        <record id="sale_coupon_inherit_form_view" model="ir.ui.view">
            <field name="name">sale.coupon.inherit.form.view</field>
            <field name="model">sale.coupon</field>
            <field name="inherit_id" ref="sale_coupon.sale_coupon_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[1]" position="after">
                    <group string="Coupon Details">
                    <field name="template_id"/>
                    <field name="title"/>
                    <field name="sub_title"/>
                    <field name="image"/>
                    <field name="street_1"/>
                    <field name="street_2"/>
                    <field name="street_3"/>
                    <field name="street_4"/>
                    <field name="country_id"/>
                    <field name="phone"/>
                    <field name="location_url" widget="url"/>
                    <field name="how_to_use"/>
                    <field name="terms_condidion"/>
                    </group>
                </xpath>
                <xpath expr="//header/field[@name='state']" position="replace">
                     <field name="state" widget="statusbar" statusbar_visible="draft,new,used,expired" context="{'state': state}"/>
                </xpath>
                <xpath expr="//header" position="inside">
                    <button name="approve_coupon_action" type="object" string="Approve" attrs="{'invisible': [('state', '!=', 'draft')]}" groups="sales_coupon.group_coupon_manager"/>
                </xpath>

            </field>
        </record>

       
        <record id="view_sale_coupon_search" model="ir.ui.view">
            <field name="name">view.sale.coupon.search</field>
            <field name="model">sale.coupon</field>
            <field name="arch" type="xml">
                <search string="Sale Coupon Search">
                    <filter name="group_sale_id" string="Sales Orders" icon="terp-partner" context="{'group_by':'order_id'}"/>
                </search>
            </field>
        </record>

        <record id="sale_coupon_view_tree_inherit" model="ir.ui.view">
            <field name="name">view.sale.coupon.tree</field>
            <field name="model">sale.coupon</field>
            <field name="inherit_id" ref="sale_coupon.sale_coupon_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='code']" position="after">
                    <field name="template_id"/>
                </xpath>
            </field>
        </record>

        <record id="sale_coupons_action" model="ir.actions.act_window">
            <field name="name">Coupons</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.coupon</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_group_sale_id': 1}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                <!-- Add Text Here -->
              </p><p>
                <!-- More details about what a user can do with this object will be OK -->
              </p>
            </field>
        </record>

        <menuitem id="menu_sale_coupon_generation" name="Generate Coupon" parent="sale.product_menu_catalog" action="sale_coupons_action" groups="sales_team.group_sale_manager" sequence="6"/>

        <record id="sale_coupon_program_view_promo_program_form_inherit" model="ir.ui.view">
            <field name="name">sale.coupon.promotion.program.form</field>
            <field name="model">sale.coupon.program</field>
            <field name="inherit_id" ref="sale_coupon.sale_coupon_program_view_form_common"/>
            <field name="arch" type="xml">
                <xpath expr="//group[@name='reward']" position="after">
                    <group string="Rewards" invisible="context.get('to_invoice', True)">
                    </group>
                </xpath>
                <xpath expr="//label[@for='website_id']" position="before">
                    <field name="is_default"/>
                </xpath>
            </field>
        </record>


        <record id="sale_coupon_template_view_form" model="ir.ui.view">
            <field name="name">sale.coupon.template.form</field>
            <field name="model">sale.coupon.template</field>
            <field name="arch" type="xml">
                <tree string="Sale Coupon Template">
                    <field name="is_default"/>
                    <field name="name"/>
                    <field name="title"/>
                    <field name="sub_title"/>
                    <field name="image"/>
                    <field name="street_1"/>
                    <field name="street_2"/>
                    <field name="street_3"/>
                    <field name="street_4"/>
                    <field name="country_id"/>
                    <field name="phone"/>
                    <field name="location_url" widget="url"/>
                    <field name="how_to_use"/>
                    <field name="terms_condidion"/>
                </tree>
            </field>
        </record>

        <record id="sale_coupon_template_view_form" model="ir.ui.view">
            <field name="name">sale.coupon.template.form</field>
            <field name="model">sale.coupon.template</field>
            <field name="arch" type="xml">
                <form string="Coupon Template" create="false" delete="false">
                    <sheet>
                        <group string="Coupon Details">
                            <field name="is_default"/>
                            <field name="name"/>
                            <field name="title"/>
                            <field name="sub_title"/>
                            <field name="image"/>
                            <field name="street_1"/>
                            <field name="street_2"/>
                            <field name="street_3"/>
                            <field name="street_4"/>
                            <field name="country_id"/>
                            <field name="phone"/>
                            <field name="location_url" widget="url"/>
                            <field name="how_to_use"/>
                            <field name="terms_condidion"/>
                        </group>
                     </sheet>
                </form>
            </field>
        </record>

         <record id="sale_coupons_template_action" model="ir.actions.act_window">
            <field name="name">Coupon Templates</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.coupon.template</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                <!-- Add Text Here -->
              </p><p>
                <!-- More details about what a user can do with this object will be OK -->
              </p>
            </field>
        </record>

        <menuitem id="menu_sale_coupon_template" name="Coupon Template" parent="sale.product_menu_catalog" action="sale_coupons_template_action" sequence="7"/>

        <record id="sale_coupon_generate_view_form_inhe" model="ir.ui.view">
            <field name="name">sale.coupon.generate.program.form</field>
            <field name="model">sale.coupon.generate</field>
            <field name="inherit_id" ref="sale_coupon.sale_coupon_generate_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='nbr_coupons']" position="after">
                    <field name="template_id" />
                </xpath>
            </field>
        </record>
        
    </data>
</odoo>